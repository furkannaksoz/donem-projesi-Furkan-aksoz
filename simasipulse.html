<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimasiPulse - Sözlük</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        body {
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background 0.3s ease, color 0.3s ease;
        }
        body.light-mode {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            color: #1e293b;
        }
        .navbar {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 1rem 2rem;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: slideDown 0.5s ease-out;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        body.light-mode .navbar {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        .navbar-brand {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            transition: color 0.3s ease;
            font-family: 'Poppins', sans-serif;
            text-decoration: none;
        }
        body.light-mode .navbar-brand {
            color: #1e293b;
        }
        .navbar-brand:hover {
            color: #00c4ff;
        }
        body.light-mode .navbar-brand:hover {
            color: #2563eb;
        }
        .navbar ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            justify-content: center;
            align-items: center;
            margin: 0;
        }
        .navbar a {
            color: #ffffff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
        }
        body.light-mode .navbar a {
            color: #1e293b;
        }
        .navbar a:hover {
            color: #00c4ff;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        body.light-mode .navbar a:hover {
            color: #2563eb;
        }
        .navbar a.active {
            color: #00c4ff;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.15);
        }
        body.light-mode .navbar a.active {
            color: #2563eb;
            background: rgba(0, 0, 0, 0.1);
        }
        .navbar a i {
            margin-right: 5px;
        }
        .simasi-pulse-btn, .simachi-btn {
            background: linear-gradient(135deg, #007bff, #00d4ff);
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }
        body.light-mode .simasi-pulse-btn,
        body.light-mode .simachi-btn {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            color: #1e293b;
        }
        .simasi-pulse-btn:hover, .simachi-btn:hover {
            background: linear-gradient(135deg, #0056b3, #00b7ff);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }
        body.light-mode .simasi-pulse-btn:hover,
        body.light-mode .simachi-btn:hover {
            background: linear-gradient(135deg, #2563eb, #2a9d8f);
            color: #ffffff;
        }
        .theme-toggle-btn {
            background: linear-gradient(135deg, #007bff, #00d4ff);
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            border: none;
            position: relative;
            overflow: hidden;
        }
        body.light-mode .theme-toggle-btn {
            background: linear-gradient(135deg, #f59e0b, #facc15);
            color: #1e293b;
        }
        .theme-toggle-btn:hover {
            background: linear-gradient(135deg, #0056b3, #00b7ff);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        body.light-mode .theme-toggle-btn:hover {
            background: linear-gradient(135deg, #d97706, #eab308);
        }
        .theme-toggle-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        .theme-toggle-btn:hover::before {
            left: 100%;
        }
        .theme-toggle-btn i {
            transition: transform 0.3s ease;
        }
        .theme-toggle-btn.active i {
            transform: rotate(180deg);
        }
        @keyframes slideDown {
            0% { opacity: 0; transform: translateY(-20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .content-wrapper {
            display: flex;
            margin: 2rem auto;
            gap: 0;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
            max-width: 1000px;
            flex-wrap: nowrap;
        }
        .chat-container {
            max-width: 700px;
            background: #1e293b;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }
        body.light-mode .chat-container {
            background: #ffffff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .header {
            background: linear-gradient(135deg, #2563eb, #1e40af);
            padding: 1.5rem;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 600;
            color: #ffffff;
            border-bottom: 4px solid #1e40af;
        }
        body.light-mode .header {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            border-bottom: 4px solid #2563eb;
            color: #1e293b;
        }
        #chatbox {
            height: 500px;
            padding: 1.5rem;
            overflow-y: auto;
            background: #2d3748;
        }
        body.light-mode #chatbox {
            background: #f0f4f8;
        }
        #chatbox p {
            margin: 1rem 0;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            max-width: 80%;
            word-wrap: break-word;
            animation: slideIn 0.4s ease-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        body.light-mode #chatbox p {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .user-message {
            background: linear-gradient(135deg, #60a5fa, #2563eb);
            color: #ffffff;
            margin-left: auto;
            text-align: right;
        }
        body.light-mode .user-message {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            color: #1e293b;
        }
        .bot-message {
            background: linear-gradient(135deg, #475569, #334155);
            color: #e2e8f0;
        }
        body.light-mode .bot-message {
            background: linear-gradient(135deg, #e9ecef, #d1d8e0);
            color: #1e293b;
        }
        .input-area {
            display: flex;
            padding: 1rem;
            background: #1e293b;
            border-top: 1px solid #334155;
            gap: 0.5rem;
            flex-wrap: wrap;
            position: relative;
        }
        body.light-mode .input-area {
            background: #ffffff;
            border-top: 1px solid #d1d8e0;
        }
        #userInput {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: 20px;
            background: #334155;
            color: #e2e8f0;
            font-size: 1rem;
            outline: none;
            transition: background 0.3s, box-shadow 0.3s;
        }
        body.light-mode #userInput {
            background: #e9ecef;
            color: #1e293b;
        }
        #userInput:focus {
            background: #475569;
            box-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
        }
        body.light-mode #userInput:focus {
            background: #d1d8e0;
            box-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
        }
        button {
            padding: 0.8rem 1.5rem;
            background: #2563eb;
            color: #ffffff;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
        }
        body.light-mode button {
            background: #4a90e2;
            color: #1e293b;
        }
        button:hover {
            background: #1e40af;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 64, 175, 0.4);
        }
        body.light-mode button:hover {
            background: #2563eb;
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }
        .voice-btn {
            padding: 0.8rem;
            background: #475569;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        body.light-mode .voice-btn {
            background: #e9ecef;
        }
        .voice-btn:hover {
            background: #2563eb;
        }
        body.light-mode .voice-btn:hover {
            background: #4a90e2;
        }
        #suggestions {
            position: absolute;
            top: 100%;
            left: 1rem;
            right: 1rem;
            background: #1e293b;
            border-radius: 10px;
            border: 1px solid #2563eb;
            max-height: 150px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        body.light-mode #suggestions {
            background: #ffffff;
            border: 1px solid #4a90e2;
        }
        .suggestion-item {
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .suggestion-item:hover {
            background: #2563eb;
            color: #ffffff;
        }
        body.light-mode .suggestion-item:hover {
            background: #4a90e2;
            color: #1e293b;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        body.light-mode ::-webkit-scrollbar-track {
            background: #f0f4f8;
        }
        ::-webkit-scrollbar-thumb {
            background: #60a5fa;
            border-radius: 4px;
        }
        body.light-mode ::-webkit-scrollbar-thumb {
            background: #4a90e2;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }
        body.light-mode ::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }
        .side-panel {
            width: 300px;
            background: #1e293b;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            padding: 1rem;
            color: #e2e8f0;
            border: 1px solid #2563eb;
            margin-left: 0;
            align-self: flex-start;
        }
        body.light-mode .side-panel {
            background: #ffffff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #4a90e2;
            color: #1e293b;
        }
        .side-panel .toggle-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #2563eb, #1e40af);
            color: #ffffff;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            margin-top: 1rem;
        }
        body.light-mode .side-panel .toggle-btn {
            background: linear-gradient(135deg, #4a90e2, #50c9c3);
            color: #1e293b;
        }
        .side-panel .toggle-btn:hover {
            background: linear-gradient(135deg, #1e40af, #2563eb);
            transform: translateY(-2px);
        }
        body.light-mode .side-panel .toggle-btn:hover {
            background: linear-gradient(135deg, #2563eb, #2a9d8f);
        }
        .side-panel .format-text {
            margin: 0;
            font-size: 1rem;
            color: #e2e8f0;
            display: none;
            line-height: 1.5;
            padding-top: 1rem;
        }
        body.light-mode .side-panel .format-text {
            color: #1e293b;
        }
        .voice-options {
            background: #1e293b;
            border: 1px solid #2563eb;
            border-radius: 10px;
            padding: 8px;
            display: none;
            margin-top: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        body.light-mode .voice-options {
            background: #ffffff;
            border: 1px solid #4a90e2;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .voice-options label {
            display: flex;
            align-items: center;
            color: #e2e8f0;
            font-size: 0.9rem;
            margin: 5px 0;
            cursor: pointer;
            transition: color 0.3s;
        }
        body.light-mode .voice-options label {
            color: #1e293b;
        }
        .voice-options label:hover {
            color: #00c4ff;
        }
        body.light-mode .voice-options label:hover {
            color: #2563eb;
        }
        .voice-options input[type="checkbox"] {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid #2563eb;
            border-radius: 4px;
            margin-right: 8px;
            background: #334155;
            cursor: pointer;
            transition: all 0.3s;
        }
        body.light-mode .voice-options input[type="checkbox"] {
            border: 2px solid #4a90e2;
            background: #e9ecef;
        }
        .voice-options input[type="checkbox"]:checked {
            background: #2563eb;
            border-color: #1e40af;
        }
        body.light-mode .voice-options input[type="checkbox"]:checked {
            background: #4a90e2;
            border-color: #2563eb;
        }
        .voice-options input[type="checkbox"]:checked::after {
            content: '\2713';
            display: block;
            text-align: center;
            color: #ffffff;
            font-size: 12px;
            line-height: 16px;
        }
        body.light-mode .voice-options input[type="checkbox"]:checked::after {
            color: #1e293b;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background: #1e293b;
            border-radius: 15px;
            padding: 2rem;
            width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
            color: #e2e8f0;
            border: 1px solid #2563eb;
            position: relative;
        }
        body.light-mode .modal-content {
            background: #ffffff;
            color: #1e293b;
            border: 1px solid #4a90e2;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        .modal-content h3 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .modal-content input {
            width: 100%;
            padding: 0.8rem;
            margin: 0.5rem 0;
            border: none;
            border-radius: 10px;
            background: #334155;
            color: #e2e8f0;
            font-size: 1rem;
            outline: none;
            transition: background 0.3s, box-shadow 0.3s;
        }
        body.light-mode .modal-content input {
            background: #e9ecef;
            color: #1e293b;
        }
        .modal-content input:focus {
            background: #475569;
            box-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
        }
        body.light-mode .modal-content input:focus {
            background: #d1d8e0;
            box-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
        }
        .modal-content button {
            width: 100%;
            padding: 0.8rem;
            margin-top: 1rem;
            background: #2563eb;
            color: #ffffff;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
        }
        body.light-mode .modal-content button {
            background: #4a90e2;
            color: #1e293b;
        }
        .modal-content button:hover {
            background: #1e40af;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 64, 175, 0.4);
        }
        body.light-mode .modal-content button:hover {
            background: #2563eb;
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #475569;
            color: #e2e8f0;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        body.light-mode .close-btn {
            background: #e9ecef;
            color: #1e293b;
        }
        .close-btn:hover {
            background: #2563eb;
            transform: scale(1.1);
            color: #ffffff;
        }
        body.light-mode .close-btn:hover {
            background: #4a90e2;
            color: #1e293b;
        }
        .word-table-modal, .favorites-modal, .profile-modal {
            width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .word-table, .favorites-table, .profile-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .word-table th, .word-table td, .favorites-table th, .favorites-table td, .profile-table th, .profile-table td {
            padding: 0.8rem;
            border: 1px solid #2563eb;
            text-align: left;
        }
        body.light-mode .word-table th,
        body.light-mode .word-table td,
        body.light-mode .favorites-table th,
        body.light-mode .favorites-table td,
        body.light-mode .profile-table th,
        body.light-mode .profile-table td {
            border: 1px solid #4a90e2;
        }
        .word-table th, .favorites-table th, .profile-table th {
            background: #2563eb;
            color: #ffffff;
        }
        body.light-mode .word-table th,
        body.light-mode .favorites-table th,
        body.light-mode .profile-table th {
            background: #4a90e2;
            color: #1e293b;
        }
        .word-table td button, .favorites-table td button, .profile-table td button {
            padding: 0.4rem 0.8rem;
            margin: 0.2rem;
            font-size: 0.9rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
        }
        .edit-btn {
            background: #4a90e2;
            color: #ffffff;
        }
        body.light-mode .edit-btn {
            background: #60a5fa;
            color: #1e293b;
        }
        .edit-btn:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
        }
        body.light-mode .edit-btn:hover {
            background: #2563eb;
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }
        .delete-btn {
            background: #dc2626;
            color: #ffffff;
        }
        body.light-mode .delete-btn {
            background: #ef4444;
            color: #1e293b;
        }
        .delete-btn:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
        }
        body.light-mode .delete-btn:hover {
            background: #dc2626;
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }
        .speak-btn {
            background: #10b981;
            color: #ffffff;
        }
        body.light-mode .speak-btn {
            background: #34d399;
            color: #1e293b;
        }
        .speak-btn:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        body.light-mode .speak-btn:hover {
            background: #10b981;
            box-shadow: 0 5px 15px rgba(52, 211, 153, 0.4);
        }
        .no-data {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
            color: #e2e8f0;
        }
        body.light-mode .no-data {
            color: #1e293b;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="navbar-brand">Simasi</a>
        <ul>
            <li><a href="index.html">Ana Sayfa</a></li>
            <li><a href="hakkinda.html">Hakkında</a></li>
            <li><a href="simasipulse.html" class="simasi-pulse-btn active"><i class="bi bi-book"></i> SimasiPulse</a></li>
            <li><a href="simachi.html" class="simachi-btn"><i class="bi bi-puzzle"></i> Simachi</a></li>
            <li><button class="theme-toggle-btn" onclick="toggleTheme()"><i class="bi bi-moon-stars-fill"></i> Mod</button></li>
        </ul>
    </nav>

    <div class="content-wrapper">
        <div class="chat-container">
            <div class="header">SimasiPulse - Sözlük</div>
            <div id="chatbox"></div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Kelime veya cümle yaz (ör: elma)" onkeydown="if(event.key === 'Enter') sendMessage();" oninput="simasiPulse.suggestWords()">
                <div id="suggestions"></div>
                <button id="voiceBtn" class="voice-btn" onclick="simasiPulse.startVoiceInput()"><i class="bi bi-mic-fill"></i></button>
                <div>
                    <button id="speakBtn" onclick="toggleVoiceOptions('speak')">Yazıyı Seslendir</button>
                    <div id="speakOptions" class="voice-options">
                        <label><input type="checkbox" id="speakTr" onchange="setSpeakLang('tr-TR')"> Türkçe Olarak Oku</label>
                        <label><input type="checkbox" id="speakEn" onchange="setSpeakLang('en-GB')"> İngilizce Olarak Oku</label>
                    </div>
                </div>
                <div>
                    <button id="addFavoriteBtn" onclick="simasiPulse.addToFavoritesFromInput()">Favorilere Ekle</button>
                </div>
                <div>
                    <button id="sendBtn" onclick="toggleVoiceOptions('send')">Mesaj Gönder</button>
                    <div id="sendOptions" class="voice-options">
                        <label><input type="checkbox" id="sendTr" onchange="sendWithVoice('tr-TR')"> Türkçe Olarak Oku</label>
                        <label><input type="checkbox" id="sendEn" onchange="sendWithVoice('en-GB')"> İngilizce Olarak Oku</label>
                        <label><input type="checkbox" id="sendNoVoice" onchange="sendWithVoice(null)"> Sessiz Gönder</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="side-panel">
            <button class="toggle-btn" onclick="toggleFormat()">Öğretme Formatı</button>
            <div id="formatText" class="format-text">
                <strong>SimasiPulse’a Nasıl Öğretirim?</strong><br><br>
                <b>1. Kelime Öğretme:</b><br>
                - Türkçe’den İngilizce’ye: <code>elma = apple</code> veya <code>kelime öğret elma = apple | örnek: I ate an apple</code><br>
                - İngilizce’den Türkçe’ye: <code>apple = elma</code> veya <code>kelime öğret (ing-tr) apple = elma | örnek: Bir elma yedim</code><br>
                - Not: Tek kelime olmalı, boşluk olmamalı! Örnek cümle isteğe bağlı.<br><br>
                <b>2. Cümle Öğretme:</b><br>
                - Türkçe’den İngilizce’ye: <code>Elma kırmızıdır = The apple is red | örnek: I see a red apple</code><br>
                - İngilizce’den Türkçe’ye: <code>The apple is red = Elma kırmızıdır | örnek: Kırmızı bir elma görüyorum</code><br>
                - Not: Cümlede boşluk olmalı, birden fazla kelime içermeli! Örnek cümle isteğe bağlı.<br><br>
                <b>3. Favorilere Ekleme:</b><br>
                - <code>elma’yı favorilere ekle</code> yazarak veya "Favorilere Ekle" butonuna tıklayarak kelimeyi/cümleyi favorilere kaydedebilirsin. Favorilerini yan paneldeki "Favoriler" butonuna tıklayarak görebilirsin.<br><br>
                <b>Örnek Kullanım:</b><br>
                - "kitap = book | örnek: I read a book" → "Harika, kelime olarak 'kitap', 'book' demek öğrendim!"<br>
                - "Kedi uyuyor = The cat is sleeping" → "Çok güzel, cümle olarak 'Kedi uyuyor', 'The cat is sleeping' demek öğrendim!"<br><br>
                <b>İpucu:</b> Öğrendiğim şeyleri sorabilirsin: "elma nedir?" veya "kitap ne demek?"<br>
                <b>Not:</b> Öğretme ve kelime yönetimi için admin girişi gereklidir.
            </div>
            <button class="toggle-btn" onclick="simasiPulse.openProfileModal()">Profil</button>
            <button class="toggle-btn" onclick="simasiPulse.openFavoritesModal()">Favoriler</button>
            <button class="toggle-btn" onclick="simasiPulse.startQuiz()">Test Modu</button>
            <button class="toggle-btn" id="adminBtn" onclick="toggleAdminModal()">Admin Girişi</button>
            <button class="toggle-btn" onclick="simasiPulse.openWordManagementModal()">Kelime Yönetimi</button>
        </div>
    </div>

    <div class="modal" id="adminModal">
        <div class="modal-content">
            <span class="close-btn" onclick="document.getElementById('adminModal').style.display='none'">×</span>
            <h3 id="modalTitle">Admin Girişi</h3>
            <div id="loginForm">
                <input type="text" id="adminUsername" placeholder="Kullanıcı Adı">
                <input type="password" id="adminPassword" placeholder="Şifre">
                <button onclick="simasiPulse.loginAdmin()">Giriş Yap</button>
            </div>
            <div id="logoutForm" style="display: none;">
                <button onclick="simasiPulse.logoutAdmin()">Çıkış Yap</button>
                <button onclick="showUpdateForm()">Kullanıcı Adı ve Şifre Güncelle</button>
            </div>
            <div id="updateForm" style="display: none;">
                <input type="text" id="newUsername" placeholder="Yeni Kullanıcı Adı">
                <input type="password" id="newPassword" placeholder="Yeni Şifre">
                <button onclick="simasiPulse.updateAdminCredentials()">Güncelle</button>
            </div>
        </div>
    </div>

    <div class="modal" id="wordManagementModal">
        <div class="modal-content word-table-modal">
            <span class="close-btn" onclick="document.getElementById('wordManagementModal').style.display='none'">×</span>
            <h3>Kelime Yönetimi</h3>
            <table class="word-table">
                <thead>
                    <tr>
                        <th>Kelime/Cümle</th>
                        <th>Çeviri</th>
                        <th>Örnek</th>
                        <th>İşlemler</th>
                    </tr>
                </thead>
                <tbody id="wordManagementList"></tbody>
            </table>
        </div>
    </div>

    <div class="modal" id="editWordModal">
        <div class="modal-content">
            <span class="close-btn" onclick="document.getElementById('editWordModal').style.display='none'">×</span>
            <h3>Kelimeyi Düzenle</h3>
            <input type="text" id="editWordKey" placeholder="Kelime/Cümle">
            <input type="text" id="editWordValue" placeholder="Çeviri">
            <input type="text" id="editWordExample" placeholder="Örnek Cümle (isteğe bağlı)">
            <button onclick="simasiPulse.saveEditedWord()">Kaydet</button>
        </div>
    </div>

    <div class="modal" id="favoritesModal">
        <div class="modal-content favorites-modal">
            <span class="close-btn" onclick="document.getElementById('favoritesModal').style.display='none'">×</span>
            <h3>Favoriler</h3>
            <table class="favorites-table" id="favoritesTable">
                <thead>
                    <tr>
                        <th>Kelime/Cümle</th>
                        <th>İşlemler</th>
                    </tr>
                </thead>
                <tbody id="favoritesList"></tbody>
            </table>
        </div>
    </div>

    <div class="modal" id="profileModal">
        <div class="modal-content profile-modal">
            <span class="close-btn" onclick="document.getElementById('profileModal').style.display='none'">×</span>
            <h3>Profil</h3>
            <div id="profileContent">
                <p><strong>Öğrenilen Kelime/Cümle:</strong> <span id="learnedWords">0</span></p>
                <table class="profile-table">
                    <thead>
                        <tr>
                            <th>Quiz Skorları</th>
                        </tr>
                    </thead>
                    <tbody id="quizScoresList"></tbody>
                </table>
                <button onclick="simasiPulse.resetQuizScores()">Skorları Sıfırla</button>
            </div>
        </div>
    </div>

    <script>
        class SimasiPulse {
            constructor() {
                this.userKnowledge = this.loadUserKnowledge();
                this.turkishToEnglish = {};
                this.englishToTurkish = {};
                this.isAdmin = localStorage.getItem('adminLoggedIn') === 'true';
                this.adminCredentials = this.loadAdminCredentials();
                this.userProfile = this.loadUserProfile();
                this.quizMode = false;
                this.quizState = { score: 0, correct: 0, wrong: 0, currentQuestion: null, questionCount: 0, totalQuestions: 5 };
                this.loadDictionary();
                this.updateAdminButton();
            }

            async loadDictionary() {
                try {
                    const response = await fetch('sozluk.json');
                    if (!response.ok) throw new Error('Sözlük dosyası yüklenemedi!');
                    const data = await response.json();
                    this.turkishToEnglish = { ...data.turkishToEnglish };
                    this.englishToTurkish = { ...data.englishToTurkish };
                    console.log('Sözlük yüklendi:', Object.keys(this.turkishToEnglish).length + ' kelime/cümle');
                } catch (error) {
                    console.error('Sözlük yükleme hatası:', error);
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Üzgünüm, sözlük dosyasını yüklerken bir hata oluştu!</p>`;
                }
            }

            loadUserKnowledge() {
                const saved = localStorage.getItem('simasiPulseKnowledge');
                return saved ? JSON.parse(saved) : {};
            }

            saveUserKnowledge() {
                localStorage.setItem('simasiPulseKnowledge', JSON.stringify(this.userKnowledge));
                this.trackProgress();
            }

            loadAdminCredentials() {
                const saved = localStorage.getItem('adminCredentials');
                return saved ? JSON.parse(saved) : { username: "admin", password: "admin123" };
            }

            saveAdminCredentials() {
                localStorage.setItem('adminCredentials', JSON.stringify(this.adminCredentials));
            }

            loadUserProfile() {
                const saved = localStorage.getItem('simasiPulseProfile');
                return saved ? JSON.parse(saved) : { learnedWords: 0, quizScores: [], favorites: [] };
            }

            saveUserProfile() {
                localStorage.setItem('simasiPulseProfile', JSON.stringify(this.userProfile));
            }

            updateAdminButton() {
                document.getElementById("adminBtn").textContent = this.isAdmin ? "Admin Çıkışı" : "Admin Girişi";
            }

            loginAdmin() {
                const username = document.getElementById("adminUsername").value.trim();
                const password = document.getElementById("adminPassword").value;
                const chatbox = document.getElementById("chatbox");
                if (username === this.adminCredentials.username && password === this.adminCredentials.password) {
                    this.isAdmin = true;
                    localStorage.setItem('adminLoggedIn', 'true');
                    document.getElementById("adminModal").style.display = "none";
                    document.getElementById("adminUsername").value = "";
                    document.getElementById("adminPassword").value = "";
                    document.getElementById("adminBtn").textContent = "Admin Çıkışı";
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Admin girişi başarılı! Artık kelime ve cümle öğretebilirsin.</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                } else {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Yanlış kullanıcı adı veya şifre! Lütfen tekrar dene.</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                }
            }

            logoutAdmin() {
                this.isAdmin = false;
                localStorage.setItem('adminLoggedIn', 'false');
                document.getElementById("adminModal").style.display = "none";
                document.getElementById("adminBtn").textContent = "Admin Girişi";
                const chatbox = document.getElementById("chatbox");
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Admin modundan çıktın!</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            updateAdminCredentials() {
                if (!this.isAdmin) {
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Kullanıcı adı ve şifre güncellemek için önce admin girişi yapmalısın!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                const newUsername = document.getElementById("newUsername").value.trim();
                const newPassword = document.getElementById("newPassword").value;
                const chatbox = document.getElementById("chatbox");
                if (newUsername && newPassword) {
                    this.adminCredentials = { username: newUsername, password: newPassword };
                    this.saveAdminCredentials();
                    document.getElementById("adminModal").style.display = "none";
                    document.getElementById("newUsername").value = "";
                    document.getElementById("newPassword").value = "";
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Kullanıcı adı ve şifre başarıyla güncellendi!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                } else {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Lütfen yeni kullanıcı adı ve şifreyi doldur!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                }
            }

            openWordManagementModal() {
                if (!this.isAdmin) {
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Kelime yönetimi için admin girişi yapmalısın!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                document.getElementById("wordManagementModal").style.display = "flex";
                this.populateTable();
            }

            populateTable() {
                const wordList = document.getElementById("wordManagementList");
                wordList.innerHTML = "";
                const words = Object.entries(this.userKnowledge);
                if (words.length === 0) {
                    wordList.innerHTML = `<tr><td colspan="4" class="no-data">Henüz kelime eklenmemiş!</td></tr>`;
                    return;
                }
                words.forEach(([key, data]) => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${key}</td>
                        <td>${data.translation}</td>
                        <td>${data.example || '-'}</td>
                        <td>
                            <button class="edit-btn" onclick="simasiPulse.editWord('${key}')">Düzenle</button>
                            <button class="delete-btn" onclick="simasiPulse.deleteWord('${key}')">Sil</button>
                            <button class="speak-btn" onclick="simasiPulse.speakEnglish('${data.translation}')">İngilizce Seslendir</button>
                        </td>
                    `;
                    wordList.appendChild(row);
                });
            }

            editWord(key) {
                const data = this.userKnowledge[key];
                document.getElementById("editWordKey").value = key;
                document.getElementById("editWordValue").value = data.translation;
                document.getElementById("editWordExample").value = data.example || "";
                document.getElementById("editWordModal").style.display = "flex";
            }

            saveEditedWord() {
                const key = document.getElementById("editWordKey").value.trim();
                const value = document.getElementById("editWordValue").value.trim();
                const example = document.getElementById("editWordExample").value.trim();
                const chatbox = document.getElementById("chatbox");
                if (key && value) {
                    const oldKey = Object.keys(this.userKnowledge).find(k => k.toLowerCase() === document.getElementById("editWordKey").value.trim().toLowerCase());
                    if (oldKey && oldKey !== key) {
                        delete this.userKnowledge[oldKey];
                    }
                    this.userKnowledge[key] = { translation: value, example: example || null };
                    this.saveUserKnowledge();
                    this.populateTable();
                    document.getElementById("editWordModal").style.display = "none";
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> "${key}" başarıyla güncellendi!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                } else {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Lütfen kelime ve çeviriyi doldur!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                }
            }

            deleteWord(key) {
                const targetKey = Object.keys(this.userKnowledge).find(k => k.toLowerCase() === key.toLowerCase());
                if (targetKey) {
                    delete this.userKnowledge[targetKey];
                    this.saveUserKnowledge();
                    this.populateTable();
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> "${targetKey}" başarıyla silindi!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                }
            }

            addToFavoritesFromInput() {
                const input = document.getElementById("userInput").value.trim();
                const lowerInput = input.toLowerCase();
                const chatbox = document.getElementById("chatbox");
                if (!input) {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Lütfen favorilere eklemek için bir kelime veya cümle gir!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                const favoriteExists = this.userProfile.favorites.some(fav => fav.toLowerCase() === lowerInput);
                if (!favoriteExists) {
                    this.userProfile.favorites.push(input);
                    this.saveUserProfile();
                    this.populateFavoritesTable();
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> "${input}" favorilere eklendi!</p>`;
                } else {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> "${input}" zaten favorilerde!</p>`;
                }
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            openFavoritesModal() {
                document.getElementById("favoritesModal").style.display = "flex";
                this.populateFavoritesTable();
            }

            populateFavoritesTable() {
                const favoritesList = document.getElementById("favoritesList");
                favoritesList.innerHTML = "";
                const favorites = this.userProfile.favorites;
                if (favorites.length === 0) {
                    favoritesList.innerHTML = `<tr><td colspan="2" class="no-data">Henüz favori eklenmemiş!</td></tr>`;
                    return;
                }
                favorites.forEach(favorite => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${favorite}</td>
                        <td>
                            <button class="delete-btn" onclick="simasiPulse.removeFromFavorites('${favorite}')">Sil</button>
                        </td>
                    `;
                    favoritesList.appendChild(row);
                });
            }

            removeFromFavorites(favorite) {
                const lowerFavorite = favorite.toLowerCase();
                this.userProfile.favorites = this.userProfile.favorites.filter(fav => fav.toLowerCase() !== lowerFavorite);
                this.saveUserProfile();
                this.populateFavoritesTable();
                const chatbox = document.getElementById("chatbox");
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> "${favorite}" favorilerden kaldırıldı!</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            openProfileModal() {
                document.getElementById("profileModal").style.display = "flex";
                this.populateProfileModal();
            }

            populateProfileModal() {
                document.getElementById("learnedWords").textContent = this.userProfile.learnedWords;
                const quizScoresList = document.getElementById("quizScoresList");
                quizScoresList.innerHTML = "";
                const scores = this.userProfile.quizScores;
                if (scores.length === 0) {
                    quizScoresList.innerHTML = `<tr><td class="no-data">Henüz quiz yapılmadı!</td></tr>`;
                    return;
                }
                scores.forEach(score => {
                    const row = document.createElement("tr");
                    row.innerHTML = `<td>${score}</td>`;
                    quizScoresList.appendChild(row);
                });
            }

            resetQuizScores() {
                this.userProfile.quizScores = [];
                this.saveUserProfile();
                this.populateProfileModal();
                const chatbox = document.getElementById("chatbox");
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Quiz skorları sıfırlandı!</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            speakEnglish(text) {
                if (!window.speechSynthesis) {
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Maalesef tarayıcın sesli okumayı desteklemiyor!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                let voices = window.speechSynthesis.getVoices();
                if (!voices.length) {
                    window.speechSynthesis.onvoiceschanged = function() {
                        voices = window.speechSynthesis.getVoices();
                        const voice = voices.find(v => v.lang === 'en-GB') || voices[0];
                        utterance.voice = voice;
                        utterance.lang = 'en-GB';
                        window.speechSynthesis.speak(utterance);
                    };
                } else {
                    const voice = voices.find(v => v.lang === 'en-GB') || voices[0];
                    utterance.voice = voice;
                    utterance.lang = 'en-GB';
                    window.speechSynthesis.speak(utterance);
                }
                utterance.onerror = function(event) {
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Üzgünüm, seslendirme sırasında bir hata oluştu: ${event.error}</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                };
            }

            learnWord(input) {
                if (!this.isAdmin) {
                    return "Üzgünüm, kelime öğretme özelliği yalnızca yöneticiler için aktif! Lütfen admin girişi yap.";
                }
                let parts, direction, key, value, example = null;

                if (input.includes("kelime öğret (tr-ing)")) {
                    parts = input.split("kelime öğret (tr-ing)")[1]?.trim();
                    direction = "tr-ing";
                } else if (input.includes("kelime öğret (ing-tr)")) {
                    parts = input.split("kelime öğret (ing-tr)")[1]?.trim();
                    direction = "ing-tr";
                } else if (input.includes("kelime öğret")) {
                    parts = input.split("kelime öğret")[1]?.trim();
                    direction = "tr-ing";
                } else {
                    parts = input;
                    direction = Object.keys(this.turkishToEnglish).find(k => k.toLowerCase() === parts.split("=")[0].trim().toLowerCase()) ? "ing-tr" : "tr-ing";
                }

                if (!parts || !parts.includes("=")) {
                    return "Kusura bakma, kelime öğretmek için 'elma = apple' veya 'apple = elma' şeklinde yazabilir misin?";
                }

                const [keyValue, examplePart] = parts.split("|").map(part => part.trim());
                [key, value] = keyValue.split("=").map(part => part.trim());
                if (examplePart && examplePart.startsWith("örnek:")) {
                    example = examplePart.split("örnek:")[1].trim();
                }

                if (key.includes(" ")) {
                    return "Pardon, sadece tek kelime öğretebilirim! Cümle için doğrudan yazmayı deneyebilirsin.";
                }

                if (key && value) {
                    const existingKey = Object.keys(this.userKnowledge).find(k => k.toLowerCase() === key.toLowerCase());
                    if (existingKey && existingKey !== key) {
                        delete this.userKnowledge[existingKey];
                    }
                    if (direction === "tr-ing") {
                        this.turkishToEnglish[key] = value;
                        this.userKnowledge[key] = { translation: value, example };
                    } else if (direction === "ing-tr") {
                        this.englishToTurkish[key] = value;
                        this.userKnowledge[key] = { translation: value, example };
                    }
                    this.saveUserKnowledge();
                    return `Harika, kelime olarak "${key}", "${value}" demek (${direction}) öğrendim!${example ? ` Örnek: ${example}` : ""}`;
                }
                return "Üzgünüm, bir hata oldu. Lütfen doğru formatta yazmayı deneyebilir misin?";
            }

            learnSentence(input) {
                if (!this.isAdmin) {
                    return "Üzgünüm, cümle öğretme özelliği yalnızca yöneticiler için aktif! Lütfen admin girişi yap.";
                }
                const parts = input.split("öğret")[1]?.trim() || input;
                if (!parts || !parts.includes("=")) {
                    return "Kusura bakma, cümle öğretmek için 'Elma kırmızıdır = The apple is red' şeklinde yazabilir misin?";
                }
                const [keyValue, examplePart] = parts.split("|").map(part => part.trim());
                const [key, value] = keyValue.split("=").map(part => part.trim());
                let example = null;
                if (examplePart && examplePart.startsWith("örnek:")) {
                    example = examplePart.split("örnek:")[1].trim();
                }
                if (!key.includes(" ")) {
                    return "Pardon, sadece cümle öğretebilirim! Tek kelime için doğrudan yazmayı deneyebilirsin.";
                }
                if (key && value) {
                    const existingKey = Object.keys(this.userKnowledge).find(k => k.toLowerCase() === key.toLowerCase());
                    if (existingKey && existingKey !== key) {
                        delete this.userKnowledge[existingKey];
                    }
                    this.userKnowledge[key] = { translation: value, example };
                    this.saveUserKnowledge();
                    return `Çok güzel, cümle olarak "${key}", "${value}" demek öğrendim!${example ? ` Örnek: ${example}` : ""}`;
                }
                return "Üzgünüm, bir hata oldu. Lütfen doğru formatta yazmayı deneyebilir misin?";
            }

            translateOrQuery(input) {
                const cleanInput = input.trim();
                const lowerInput = cleanInput.toLowerCase();
                let response = "";
                const userKnowledgeKey = Object.keys(this.userKnowledge).find(k => k.toLowerCase() === lowerInput);
                if (userKnowledgeKey) {
                    response = `"${userKnowledgeKey}", "${this.userKnowledge[userKnowledgeKey].translation}" demek.`;
                    if (this.userKnowledge[userKnowledgeKey].example) {
                        response += ` Örnek: ${this.userKnowledge[userKnowledgeKey].example}`;
                    }
                } else {
                    const turkishKey = Object.keys(this.turkishToEnglish).find(k => k.toLowerCase() === lowerInput);
                    const englishKey = Object.keys(this.englishToTurkish).find(k => k.toLowerCase() === lowerInput);
                    if (turkishKey) {
                        response = `"${turkishKey}", "${this.turkishToEnglish[turkishKey]}" demek.`;
                    } else if (englishKey) {
                        response = `"${englishKey}", "${this.englishToTurkish[englishKey]}" demek.`;
                    } else {
                        response = `Maalesef "${cleanInput}" hakkında bilgim yok. Dilersen bana öğretebilirsin!`;
                    }
                }
                return response;
            }

            suggestWords() {
                const input = document.getElementById("userInput").value.trim();
                const lowerInput = input.toLowerCase();
                const suggestionsDiv = document.getElementById("suggestions");
                suggestionsDiv.innerHTML = "";
                if (!input) {
                    suggestionsDiv.style.display = "none";
                    return;
                }
                const allWords = [
                    ...Object.keys(this.turkishToEnglish),
                    ...Object.keys(this.englishToTurkish),
                    ...Object.keys(this.userKnowledge)
                ].filter(word => word.toLowerCase().startsWith(lowerInput)).slice(0, 5);
                if (allWords.length > 0) {
                    allWords.forEach(word => {
                        const div = document.createElement("div");
                        div.className = "suggestion-item";
                        div.textContent = word;
                        div.onclick = () => {
                            document.getElementById("userInput").value = word;
                            suggestionsDiv.style.display = "none";
                        };
                        suggestionsDiv.appendChild(div);
                    });
                    suggestionsDiv.style.display = "block";
                } else {
                    suggestionsDiv.style.display = "none";
                }
            }

            startVoiceInput() {
                const chatbox = document.getElementById("chatbox");
                if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Üzgünüm, tarayıcın sesli komutları desteklemiyor!</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                recognition.lang = "tr-TR";
                recognition.start();
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById("userInput").value = transcript;
                    sendMessage();
                };
                recognition.onerror = (event) => {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Sesli komut sırasında bir hata oluştu: ${event.error}</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                };
            }

            startQuiz() {
                const chatbox = document.getElementById("chatbox");
                const wordCount = Object.keys(this.userKnowledge).length;
                if (wordCount < this.quizState.totalQuestions) {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Quiz için en az ${this.quizState.totalQuestions} kelime öğretmelisin! Şu an ${wordCount} kelime var.</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                    return;
                }
                this.quizMode = true;
                this.quizState = { score: 0, correct: 0, wrong: 0, currentQuestion: null, questionCount: 0, totalQuestions: 5, usedQuestions: [] };
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Quiz başlıyor! ${this.quizState.totalQuestions} soru soracağım. İlk soruya hazır mısın?</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
                this.askQuizQuestion();
            }

            askQuizQuestion() {
                const chatbox = document.getElementById("chatbox");
                const words = Object.keys(this.userKnowledge).filter(word => !this.quizState.usedQuestions.includes(word));
                if (this.quizState.questionCount >= this.quizState.totalQuestions || words.length === 0) {
                    this.endQuiz();
                    return;
                }
                const randomWord = words[Math.floor(Math.random() * words.length)];
                this.quizState.currentQuestion = randomWord;
                this.quizState.usedQuestions.push(randomWord);
                this.quizState.questionCount++;
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Soru ${this.quizState.questionCount}: "${randomWord}" ne demek?</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            checkQuizAnswer(input) {
                const chatbox = document.getElementById("chatbox");
                const correctAnswer = this.userKnowledge[this.quizState.currentQuestion].translation;
                const cleanInput = input.trim().toLowerCase();
                if (cleanInput === correctAnswer.toLowerCase()) {
                    this.quizState.correct++;
                    this.quizState.score += 20;
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Doğru! "${this.quizState.currentQuestion}" = "${correctAnswer}". Skorun: ${this.quizState.score}</p>`;
                } else {
                    this.quizState.wrong++;
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Yanlış! "${this.quizState.currentQuestion}" = "${correctAnswer}". Skorun: ${this.quizState.score}</p>`;
                }
                chatbox.scrollTop = chatbox.scrollHeight;
                this.askQuizQuestion();
            }

            endQuiz() {
                const chatbox = document.getElementById("chatbox");
                this.quizMode = false;
                this.userProfile.quizScores.push(this.quizState.score);
                this.saveUserProfile();
                this.populateProfileModal();
                chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Quiz bitti! Skorun: ${this.quizState.score}. Doğru: ${this.quizState.correct}, Yanlış: ${this.quizState.wrong}. Tekrar denemek ister misin?</p>`;
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            trackProgress() {
                this.userProfile.learnedWords = Object.keys(this.userKnowledge).length;
                this.saveUserProfile();
                this.populateProfileModal();
            }

            updateProfileText() {
                // Bu fonksiyon artık kullanılmıyor, populateProfileModal kullanıyor
            }
        }

        const simasiPulse = new SimasiPulse();

        function toggleTheme() {
            document.body.classList.toggle("light-mode");
            const themeBtn = document.querySelector(".theme-toggle-btn");
            const icon = themeBtn.querySelector("i");
            if (document.body.classList.contains("light-mode")) {
                icon.classList.remove("bi-moon-stars-fill");
                icon.classList.add("bi-sun-fill");
                themeBtn.innerHTML = `<i class="bi bi-sun-fill"></i> Mod`;
            } else {
                icon.classList.remove("bi-sun-fill");
                icon.classList.add("bi-moon-stars-fill");
                themeBtn.innerHTML = `<i class="bi bi-moon-stars-fill"></i> Mod`;
            }
        }

        function toggleFormat() {
            const formatText = document.getElementById("formatText");
            formatText.style.display = formatText.style.display === "block" ? "none" : "block";
        }

        function toggleAdminModal() {
            const modal = document.getElementById("adminModal");
            const loginForm = document.getElementById("loginForm");
            const logoutForm = document.getElementById("logoutForm");
            const updateForm = document.getElementById("updateForm");
            modal.style.display = "flex";
            if (simasiPulse.isAdmin) {
                loginForm.style.display = "none";
                logoutForm.style.display = "block";
                updateForm.style.display = "none";
            } else {
                loginForm.style.display = "block";
                logoutForm.style.display = "none";
                updateForm.style.display = "none";
            }
        }

        function showUpdateForm() {
            document.getElementById("loginForm").style.display = "none";
            document.getElementById("logoutForm").style.display = "none";
            document.getElementById("updateForm").style.display = "block";
        }

        function toggleVoiceOptions(type) {
            const speakOptions = document.getElementById("speakOptions");
            const sendOptions = document.getElementById("sendOptions");
            if (type === "speak") {
                speakOptions.style.display = speakOptions.style.display === "block" ? "none" : "block";
                sendOptions.style.display = "none";
            } else if (type === "send") {
                sendOptions.style.display = sendOptions.style.display === "block" ? "none" : "block";
                speakOptions.style.display = "none";
            }
        }

        function setSpeakLang(lang) {
            const speakTr = document.getElementById("speakTr");
            const speakEn = document.getElementById("speakEn");
            if (lang === "tr-TR") {
                speakTr.checked = true;
                speakEn.checked = false;
            } else if (lang === "en-GB") {
                speakTr.checked = false;
                speakEn.checked = true;
            }
            const text = document.getElementById("userInput").value.trim();
            if (text && window.speechSynthesis) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                let voices = window.speechSynthesis.getVoices();
                if (!voices.length) {
                    window.speechSynthesis.onvoiceschanged = function() {
                        voices = window.speechSynthesis.getVoices();
                        const voice = voices.find(v => v.lang === lang) || voices[0];
                        utterance.voice = voice;
                        window.speechSynthesis.speak(utterance);
                    };
                } else {
                    const voice = voices.find(v => v.lang === lang) || voices[0];
                    utterance.voice = voice;
                    window.speechSynthesis.speak(utterance);
                }
                utterance.onerror = function(event) {
                    const chatbox = document.getElementById("chatbox");
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Üzgünüm, seslendirme sırasında bir hata oluştu: ${event.error}</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                };
            }
        }

        function sendWithVoice(lang) {
            const sendTr = document.getElementById("sendTr");
            const sendEn = document.getElementById("sendEn");
            const sendNoVoice = document.getElementById("sendNoVoice");
            if (lang === "tr-TR") {
                sendTr.checked = true;
                sendEn.checked = false;
                sendNoVoice.checked = false;
            } else if (lang === "en-GB") {
                sendTr.checked = false;
                sendEn.checked = true;
                sendNoVoice.checked = false;
            } else {
                sendTr.checked = false;
                sendEn.checked = false;
                sendNoVoice.checked = true;
            }
            sendMessage(lang);
        }

        function sendMessage(voiceLang = null) {
            const input = document.getElementById("userInput").value.trim();
            const chatbox = document.getElementById("chatbox");
            if (!input) return;

            chatbox.innerHTML += `<p class="user-message"><b>Sen:</b> ${input}</p>`;
            let response = "";
            if (simasiPulse.quizMode) {
                simasiPulse.checkQuizAnswer(input);
            } else if (input.includes("öğret")) {
                if (input.includes("kelime öğret") || (input.includes("=") && !input.includes(" "))) {
                    response = simasiPulse.learnWord(input);
                } else {
                    response = simasiPulse.learnSentence(input);
                }
            } else if (input.includes("favorilere ekle")) {
                const word = input.split("favorilere ekle")[1]?.trim();
                if (word) {
                    const lowerWord = word.toLowerCase();
                    const favoriteExists = simasiPulse.userProfile.favorites.some(fav => fav.toLowerCase() === lowerWord);
                    if (!favoriteExists) {
                        simasiPulse.userProfile.favorites.push(word);
                        simasiPulse.saveUserProfile();
                        response = `"${word}" favorilere eklendi!`;
                    } else {
                        response = `"${word}" zaten favorilerde!`;
                    }
                } else {
                    response = `Lütfen favorilere eklemek için bir kelime veya cümle belirt!`;
                }
            } else {
                response = simasiPulse.translateOrQuery(input);
            }

            chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> ${response}</p>`;
            chatbox.scrollTop = chatbox.scrollHeight;
            document.getElementById("userInput").value = "";

            if (voiceLang && window.speechSynthesis) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(response);
                utterance.lang = voiceLang;
                let voices = window.speechSynthesis.getVoices();
                if (!voices.length) {
                    window.speechSynthesis.onvoiceschanged = function() {
                        voices = window.speechSynthesis.getVoices();
                        const voice = voices.find(v => v.lang === voiceLang) || voices[0];
                        utterance.voice = voice;
                        window.speechSynthesis.speak(utterance);
                    };
                } else {
                    const voice = voices.find(v => v.lang === voiceLang) || voices[0];
                    utterance.voice = voice;
                    window.speechSynthesis.speak(utterance);
                }
                utterance.onerror = function(event) {
                    chatbox.innerHTML += `<p class="bot-message"><b>SimasiPulse:</b> Üzgünüm, seslendirme sırasında bir hata oluştu: ${event.error}</p>`;
                    chatbox.scrollTop = chatbox.scrollHeight;
                };
            }
        }
    </script>
</body>
</html>